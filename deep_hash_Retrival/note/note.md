- 论文
  - 论文计算距离 欧式距离和汉明距离是很快的，基本在us级。
  - 哈希检索网络比分类网络（论文里用的AlexNet）多了一层全连接层，所以全连接层之前网络参数用预训练好即可，隐藏层之后的参数随机设置。
  - 增加的隐藏层节点数并不是越多效果越好。
- 思路：
  - 发现粗筛选比对的只是hash值，所以网络复杂一些只会影响产生二值的时间，对比对过程不影响。
  - 之前想可不可以把孪生网络加进去，发现检索问题，必须得检索的图片和数据库有同一类的，所以不能拿不同类的进来。
  - 如何提高准确性，万一检索不到怎么办？或者把错误率降到很低。
  - 不可能把所有的图片数量检索出来，只能设置一个汉明距离，检索出来距离里的图片。
  - 假如粗检索阈值设置为2，已经不能在依靠粗检索区分相似性，只能通过另一种方法来细检索。
  - 汉明距离一样的情况下，欧式距离大小都一样，感觉用汉明距离排序即可。
- 数据集
  - 车辆数据集特点：车已经被切割出来，背景干扰小。
- 实现步骤
  - 论文
  - 粗筛选
    - 增加的隐藏层加激活函数输出后，设置一个阈值使得每个节点的输出值为0或1
    - 求节点输出的汉明距离（两个码不同的个数），设置一个阈值，使得和检测图片相似的有一个范围。
  - 细筛选
    - 将隐藏层的输出（不是二值）进行欧式距离计算，发现对同一辆车没有区分度。
  - github代码
    - 检索图片隐藏层节点
- 代码
  - 测试 分类
    - 10/30  alexnet 	63epoch  训练集97% 测试集76%  训练集出现过拟合
    - 10/30 alexnet        48eopch   训练集98% 测试集77%  在之前的权重基础上加上dropout
    - 10/31 resnet34    120epoch  训练集99%  测试集79%
    - 10/31 resnet34     79epoch   训练集98% 测试集79%  增加尺度旋转，亮度，对比度，饱和度变化
    - 10/31 resnet34 24epoch 训练集98% 测试集79% 将均值和方差改成自己的数据。
    - 10/31 resnet34 transform数据转换有问题，改了一下到80%了，先到80吧。
    - 11/02 resnet50 80%
    - 11/03 resnet50 100%刚才发现测试类有两个类数据分错了，导致之前准确率一直到不了80%
  - 测试 检索
    - 11/2 1000张查询图片在9000张数据库查询用了2.86S，速度还是可以的
    - 11/3 检索topk准确率[0.8        0.79946    0.79973    0.79995333 0.7995925  0.718744  ]-》[1, 50, 100, 600, 800, 1000]很大程度上由网络的性能决定
    - 11/3 汉明距离设置为10  1000张查询图片在数据库9000张查询时间为4.38s